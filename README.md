# Instagram Bot

![Version](https://img.shields.io/badge/version-1.0.0-blue)
![Python](https://img.shields.io/badge/python-3.9-blue)
![FastAPI](https://img.shields.io/badge/fastapi-0.104.1-green)
![Instagrapi](https://img.shields.io/badge/instagrapi-1.19.4-orange)

ฺฉ ุฑุจุงุช ููุดููุฏ ุงูุณุชุงฺฏุฑุงู ุจุง ูุงุจูุชโูุง ุชุนุงูู ุทุจุน ฺฉู ุงุฒ ุทุฑู Docker ุงุฌุฑุง ูโุดูุฏ ู ุฏุงุฏูโูุง ุฑุง ุฏุฑ PostgreSQL ุฐุฎุฑู ูโฺฉูุฏ.

## ูฺฺฏโูุง

- ๐ **ุชุนุงููุงุช ุงุชููุงุชฺฉ**: ูุงููุ ุขููุงููุ ฺฉุงููุชุ ูุงฺฉุ ูพุงู ูุณุชูู ู ูุดุงูุฏู ุงุณุชูุฑ
- ๐ **ุชุนุงูู ุจุง ูุดุชฺฏ**: ุฌุณุชุฌู ู ุชุนุงูู ุจุง ูพุณุชโูุง ุจุฑ ุงุณุงุณ ูุดุชฺฏโูุง ูุงุฑุณ
- ๐ง **ููุดููุฏ ู ุงูุณุงู**: ุงูฺฏูุฑุชู ุฑูุชุงุฑ ุทุจุน ุจุง ููููโูุง ุชุตุงุฏู ู ุงุณุชุฑุงุญุช ุจู ูุนุงูุชโูุง
- ๐ **API ูุงูุชูุฑูฺฏ**: ุฏุณุชุฑุณ ุจู ุขูุงุฑ ู ุนููฺฉุฑุฏ ุฑุจุงุช ุงุฒ ุทุฑู FastAPI
- ๐ **ูุฏุฑุช ูุดุณุช**: ุฐุฎุฑูโุณุงุฒ ูุดุณุช ฺฉุงุฑุจุฑ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุฑูุฏ ูุฌุฏุฏ
- ๐ณ **ุฏุงฺฉุฑุงุฒ ุดุฏู**: ุงุฌุฑุง ุณุงุฏู ู ุจุฏูู ูุงุฒ ุจู ุชูุธูุงุช ูพฺุฏู

## ูุนูุงุฑ ุณุณุชู

```mermaid
graph TD
    A[ฺฉุงุฑุจุฑ] --> B[Docker/Docker Compose]
    B --> C[PostgreSQL Container]
    B --> D[App Container]
    D --> |ุฐุฎุฑู ุฏุงุฏู| C
    D --> |ุชุนุงูู| E[API ุงูุณุชุงฺฏุฑุงู]
    A --> |ูุดุงูุฏู ุขูุงุฑ ู ฺฏุฒุงุฑุดุงุช| F[FastAPI]
    F --> D
    
    subgraph "App Container"
    D1[FastAPI Server] --> D2[Bot Core]
    D2 --> D3[Session Manager]
    D2 --> D4[Activity Manager]
    D2 --> D5[Follow Manager]
    D2 --> D6[Unfollow Manager]
    D2 --> D7[Comment Manager]
    D2 --> D8[Direct Manager]
    D2 --> D9[Story Manager]
    D2 --> D10[Hashtag Manager]
    end
```

## ุฌุฑุงู ฺฉุงุฑ ุฑุจุงุช

```mermaid
sequenceDiagram
    participant User as ฺฉุงุฑุจุฑ
    participant Docker as ุฏุงฺฉุฑ
    participant Bot as ุฑุจุงุช
    participant Instagram as ุงูุณุชุงฺฏุฑุงู
    participant DB as ุฏุชุงุจุณ

    User->>Docker: ุงุฌุฑุง docker-compose
    Docker->>DB: ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ
    Docker->>Bot: ุฑุงูโุงูุฏุงุฒ ุฑุจุงุช
    Bot->>DB: ุงุฌุงุฏ ุฌุฏุงูู ุฏุชุงุจุณ
    Bot->>Instagram: ุชูุงุด ุจุฑุง ูุฑูุฏ
    Instagram-->>Bot: ูุดุณุช ูุนุชุจุฑ
    Bot->>DB: ุฐุฎุฑู ูุถุนุช ูุฑูุฏ
    loop ูุนุงูุชโูุง ุชุตุงุฏู
        Bot->>Bot: ุงูุชุฎุงุจ ุงูุฏุงู ุชุตุงุฏู
        Bot->>Instagram: ุงูุฌุงู ุงูุฏุงู (ูุงููุ ฺฉุงููุชุ ูุงฺฉ ู ุบุฑู)
        Instagram-->>Bot: ูพุงุณุฎ ุงูุฏุงู
        Bot->>DB: ุฐุฎุฑู ุชุนุงูู
        Bot->>Bot: ุงุณุชุฑุงุญุช ุชุตุงุฏู
    end
    User->>Bot: ุฏุฑุฎูุงุณุช API (ูุถุนุชุ ุขูุงุฑ)
    Bot->>DB: ุงุณุชุนูุงู ุฏุงุฏูโูุง
    Bot-->>User: ููุงุด ุขูุงุฑ ู ฺฏุฒุงุฑุดุงุช
```

## ูุญูู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง

- Docker ู Docker Compose
- ฺฉ ุงฺฉุงูุช ุงูุณุชุงฺฏุฑุงู

### ูุฑุงุญู ุฑุงูโุงูุฏุงุฒ

1. **ฺฉููู ฺฉุฑุฏู ูุฎุฒู**:
   ```bash
   git clone https://github.com/yourusername/instagram-bot.git
   cd instagram-bot
   ```

2. **ูุฑุงุด ูุงู .env**:
   ```
   # Database
   DB_USER=instabot
   DB_PASSWORD=instabot_password
   DB_NAME=instabot_db
   DB_PORT=5432

   # Instagram
   INSTA_USERNAME=your_instagram_username
   INSTA_PASSWORD=your_instagram_password

   # API
   API_PORT=8000
   ```

3. **ุณุงุฎุช ู ุงุฌุฑุง ฺฉุงูุชูุฑูุง**:
   ```bash
   docker-compose up --build
   ```

4. **ุฏุณุชุฑุณ ุจู API**:
   ```
   http://localhost:8000/docs
   ```

## ุณุงุฎุชุงุฑ ูพุฑูฺู

```
instagram-bot/
โโโ docker-compose.yml      # ุชูุธูุงุช ุฏุงฺฉุฑ ฺฉุงููพูุฒ
โโโ Dockerfile              # ูุงู ุฏุงฺฉุฑ ุจุฑุง ุณุงุฎุช ุงูุฌ
โโโ requirements.txt        # ูุงุจุณุชฺฏโูุง ูพุงุชูู
โโโ .env                    # ูุชุบุฑูุง ูุญุท
โโโ app/
โ   โโโ __init__.py
โ   โโโ main.py             # ููุทู ูุฑูุฏ ุงุตู ุจุฑูุงูู
โ   โโโ config.py           # ุชูุธูุงุช ุจุฑูุงูู
โ   โโโ database/           # ูุงู ุฏุชุงุจุณ
โ   โ   โโโ __init__.py
โ   โ   โโโ models.py       # ูุฏูโูุง SQLAlchemy
โ   โ   โโโ db.py           # ุงุชุตุงู ุฏุชุงุจุณ
โ   โโโ bot/                # ููุทู ุงุตู ุฑุจุงุช
โ   โ   โโโ __init__.py
โ   โ   โโโ session_manager.py  # ูุฏุฑุช ูุดุณุช ุงูุณุชุงฺฏุฑุงู
โ   โ   โโโ comment.py      # ุนููุงุช ฺฉุงููุช
โ   โ   โโโ direct.py       # ุงุฑุณุงู ูพุงู ูุณุชูู
โ   โ   โโโ story.py        # ุชุนุงูู ุจุง ุงุณุชูุฑ
โ   โ   โโโ follow.py       # ูุฏุฑุช ูุงูู
โ   โ   โโโ unfollow.py     # ูุฏุฑุช ุขููุงูู
โ   โ   โโโ hashtags.py     # ูุฏุฑุช ูุดุชฺฏโูุง
โ   โ   โโโ activity.py     # ูุฏุฑุช ูุนุงูุชโูุง
โ   โโโ api/                # API ูุง FastAPI
โ   โ   โโโ __init__.py
โ   โ   โโโ router.py       # ูุณุฑูุง API
โ   โ   โโโ schemas.py      # ูุฏูโูุง Pydantic
โ   โโโ utils/
โ       โโโ __init__.py
โ       โโโ logger.py       # ุณุณุชู ุซุจุช ูุงฺฏ
โโโ data/                   # ุฏุงุฏูโูุง ุฐุฎุฑู ุดุฏู
    โโโ logs/               # ูุงฺฏโูุง
    โโโ session.json        # ูุงู ูุดุณุช ุงูุณุชุงฺฏุฑุงู
    โโโ hashtags.txt        # ูุณุช ูุดุชฺฏโูุง
```

## APIูุง ููุฌูุฏ

### ูุถุนุช ุฑุจุงุช
```http
GET /api/status
```

ููููู ูพุงุณุฎ:
```json
{
  "is_running": true,
  "last_login": "2025-03-17T20:45:28",
  "last_activity": "2025-03-17T20:54:04",
  "follows_today": 5,
  "unfollows_today": 3,
  "comments_today": 2,
  "likes_today": 10,
  "direct_messages_today": 1,
  "story_views_today": 15,
  "story_reactions_today": 4,
  "error_count": 0,
  "last_error": null,
  "last_error_time": null
}
```

### ุขูุงุฑ ุฑุจุงุช
```http
GET /api/stats?time_range=daily
```

ุจุงุฒูโูุง ุฒูุงู ูุงุจู ุงูุชุฎุงุจ:
- `daily`: ุฑูุฒุงูู
- `weekly`: ููุชฺฏ
- `monthly`: ูุงูุงูู
- `six_months`: ุดุดโูุงูู
- `yearly`: ุณุงูุงูู

### ุชุนุงููุงุช ุฑุจุงุช
```http
GET /api/interactions?time_range=weekly&page=1&limit=20
```

### ูุณุช ูุงูููุฑูุง
```http
GET /api/followers?page=1&limit=20
```

### ูุณุช ูุงููุฆูฺฏโูุง
```http
GET /api/following?page=1&limit=20
```

## ุงูฺฏูุฑุชู ุงูุชุฎุงุจ ูุนุงูุช

```mermaid
flowchart TD
    A[ุดุฑูุน] --> B{ุขุง ุณุงุนุช ฺฉุงุฑ ุงุณุชุ}
    B -- ุจูู --> C[ุงูุชุฎุงุจ ุงูุฏุงู ุชุตุงุฏู]
    B -- ุฎุฑ --> D[ุงุณุชุฑุงุญุช ุชุง ุณุงุนุช ฺฉุงุฑ ุจุนุฏ]
    D --> B
    
    C --> E{ุงูุฏุงู ุงูุชุฎุงุจ ุดุฏู}
    E -- ูุงูู ฺฉุฑุฏู ุจุง ูุดุชฺฏ --> F[ุงูุชุฎุงุจ ูุดุชฺฏ ุชุตุงุฏู]
    E -- ูุงูู ูุชูุงุจู --> G[ูุงูู ฺฉุงุฑุจุฑุงู ฺฉู ูุง ุฑุง ูุงูู ฺฉุฑุฏูโุงูุฏ]
    E -- ุขููุงูู ฺฉุฑุฏู --> H[ุขููุงูู ฺฉุงุฑุจุฑุงู ฺฉู ูุง ุฑุง ูุงูู ูฺฉุฑุฏูโุงูุฏ]
    E -- ุขููุงูู ูุชูุงุจู --> I[ุขููุงูู ฺฉุณุงู ฺฉู ุขููุงูููุงู ฺฉุฑุฏูโุงูุฏ]
    E -- ฺฉุงููุช ฺฏุฐุงุดุชู --> J[ฺฉุงููุช ุจุฑ ุฑู ูพุณุชโูุง ูุดุชฺฏ ุง ูุงูููุฑูุง]
    E -- ูพุงู ูุณุชูู --> K[ุงุฑุณุงู ูพุงู ุจู ูุงูููุฑูุง ุฌุฏุฏ]
    E -- ุงุณุชูุฑ --> L[ูุดุงูุฏู ู ูุงฺฉูุด ุจู ุงุณุชูุฑโูุง]
    
    F --> M[ุงูุฌุงู ุงูุฏุงู]
    G --> M
    H --> M
    I --> M
    J --> M
    K --> M
    L --> M
    
    M --> N[ุซุจุช ุชุนุงูู ุฏุฑ ุฏุชุงุจุณ]
    N --> O[ุงุณุชุฑุงุญุช ุชุตุงุฏู ุจู ุงูุฏุงูุงุช]
    O --> B
```

## ุชูุธูุงุช ุฑูุชุงุฑ ุฑุจุงุช

ุชูุธูุงุช ุฑูุชุงุฑ ุฑุจุงุช ุฏุฑ ูุงู `app/config.py` ูุงุจู ุชุบุฑ ุงุณุช:

```python
BOT_CONFIG = {
    "max_interactions_per_day": 150,  # ูุฌููุน ุชุนุงููุงุช ุฑูุฒุงูู
    "max_follows_per_day": 50,
    "max_unfollows_per_day": 50,
    "max_comments_per_day": 20,
    "max_likes_per_day": 80,
    "max_direct_messages_per_day": 10,
    "max_story_views_per_day": 100,
    "min_delay_between_actions": 30,  # ุญุฏุงูู ุชุฃุฎุฑ ุจู ุงูุฏุงูุงุช ุจู ุซุงูู
    "max_delay_between_actions": 180,  # ุญุฏุงฺฉุซุฑ ุชุฃุฎุฑ ุจู ุงูุฏุงูุงุช ุจู ุซุงูู
    "working_hours": {
        "start": 8,  # ุณุงุนุช ุดุฑูุน ูุนุงูุช (8 ุตุจุญ)
        "end": 23,  # ุณุงุนุช ูพุงุงู ูุนุงูุช (11 ุดุจ)
    }
}
```

## ุงุณุชุฑุงุชฺโูุง ูุงูู/ุขููุงูู

1. **ูุงูู ฺฉุฑุฏู ุจุง ูุดุชฺฏ**: ุฑุจุงุช ฺฉุงุฑุจุฑุงู ฺฉู ุฏุฑ ูุดุชฺฏโูุง ูุดุฎุต ุดุฏู ูุนุงู ูุณุชูุฏ ุฑุง ูุงูู ูโฺฉูุฏ.
2. **ูุงูู ูุชูุงุจู**: ฺฉุงุฑุจุฑุงู ฺฉู ุฑุจุงุช ุฑุง ูุงูู ฺฉุฑุฏูโุงูุฏ ุงูุง ุฑุจุงุช ุขููุง ุฑุง ูุงูู ูฺฉุฑุฏู ุฑุง ูุงูู ูโฺฉูุฏ.
3. **ุขููุงูู ฺฉุฑุฏู ุบุฑูุงููฺฉููุฏฺฏุงู**: ฺฉุงุฑุจุฑุงู ฺฉู ุฑุจุงุช ุขููุง ุฑุง ูุงูู ฺฉุฑุฏู ุงูุง ุขููุง ุฑุจุงุช ุฑุง ูุงูู ููโฺฉููุฏ ู ฺูุฏ ุฑูุฒ ฺฏุฐุดุชู ุงุณุช ุฑุง ุขููุงูู ูโฺฉูุฏ.
4. **ุขููุงูู ูุชูุงุจู**: ฺฉุงุฑุจุฑุงู ฺฉู ูุจูุงู ุฑุจุงุช ุฑุง ูุงูู ูโฺฉุฑุฏูุฏ ุงูุง ุงูุงู ุขููุงูู ฺฉุฑุฏูโุงูุฏ ุฑุง ุขููุงูู ูโฺฉูุฏ.

## ูฺฉุงุช ุงููุช

ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุณุฏูุฏ ุดุฏู ุงฺฉุงูุช ุงูุณุชุงฺฏุฑุงูุ ุฑุจุงุช:

1. **ุงุณุชุฑุงุญุช ูโฺฉูุฏ**: ุจู ูุนุงูุชโูุง ุงุณุชุฑุงุญุช ุชุตุงุฏู ุฏุงุฑุฏ.
2. **ูุญุฏูุฏุช ุฏุงุฑุฏ**: ุชุนุฏุงุฏ ุชุนุงููุงุช ุฑูุฒุงูู ูุญุฏูุฏ ุงุณุช.
3. **ุณุงุนุงุช ฺฉุงุฑ ุฏุงุฑุฏ**: ููุท ุฏุฑ ุณุงุนุงุช ูุดุฎุต ุดุฏู ูุนุงูุช ูโฺฉูุฏ.
4. **ุทุจุน ุนูู ูโฺฉูุฏ**: ุงูฺฏููุง ุฑูุชุงุฑ ุทุจุน ู ุชุตุงุฏู ุฏุงุฑุฏ.

## ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ

ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุง ุงุนูุงู ุชุบุฑุงุช:

```bash
# ูุชููู ฺฉุฑุฏู ฺฉุงูุชูุฑูุง
docker-compose down

# ุณุงุฎุช ู ุงุฌุฑุง ูุฌุฏุฏ
docker-compose up --build
```

## ุนุจโุงุจ

### ุฎุทุง ุฏุฑ ุงุชุตุงู ุจู ุฏุชุงุจุณ
ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุชุบุฑูุง ูุญุท ุฏุชุงุจุณ ุฏุฑ ูุงู `.env` ุจู ุฏุฑุณุช ุชูุธู ุดุฏูโุงูุฏ.

### ุฎุทุง ุฏุฑ ูุฑูุฏ ุจู ุงูุณุชุงฺฏุฑุงู
- ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุตุญุญ ุงุณุช.
- ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุญุณุงุจ ุดูุง ูุญุฏูุฏุช ุงููุช ูุฏุงุดุชู ุจุงุดุฏ.
- ุฏุฑ ุตูุฑุช ูุนุงู ุจูุฏู ุชุงุฏ ุฏู ูุฑุญููโุงุ ููฺฉู ุงุณุช ูุฑูุฏ ุจุง ูุดฺฉู ููุงุฌู ุดูุฏ.

## ุงุฎุทุงุฑ

ุงุณุชูุงุฏู ุงุฒ ุฑุจุงุชโูุง ููฺฉู ุงุณุช ูุงูุถ ููุงูู ุงูุณุชุงฺฏุฑุงู ุจุงุดุฏ ู ูโุชูุงูุฏ ููุฌุฑ ุจู ูุญุฏูุฏุชโูุง ุง ูุณุฏูุฏ ุดุฏู ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุฏ. ุงุณุชูุงุฏู ุงุฒ ุงู ุฑุจุงุช ุจุง ูุณุฆููุช ุฎูุฏุชุงู ุงุณุช.